<!DOCTYPE html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="theme" content="hugo-academic">
    <meta name="generator" content="Hugo 0.16" />
    <meta name="author" content="Mohit Sharma">
    <meta name="description" content="Associate Research Scientist">

    <link rel="stylesheet" href="http://sharmamohit.com/css/jupyter.css">
    <link rel="stylesheet" href="http://sharmamohit.com/css/highlight.min.css">
    <link rel="stylesheet" href="http://sharmamohit.com/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://sharmamohit.com/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://sharmamohit.com/css/academicons.min.css">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700|Merriweather|Roboto+Mono">
    <link rel="stylesheet" href="http://sharmamohit.com/css/hugo-academic.css">
    


    <link rel="shortcut icon" href="http://sharmamohit.com/img/favicon.ico" type="image/x-icon">
    <link rel="canonical" href="http://sharmamohit.com/tutorials/ucsl/Python-File-IO/">

    <title>Python-File-IO | Mohit Sharma</title>

</head>
<body id="top">


<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
    <div class="container">

        
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://sharmamohit.com/">Mohit Sharma</a>
        </div>

        
        <div class="collapse navbar-collapse" id="#navbar-collapse-1">

            
            <ul class="nav navbar-nav navbar-right">
                
                <li class="nav-item"><a href="http://sharmamohit.com/#top">Home</a></li>
                
                <li class="nav-item"><a href="http://sharmamohit.com/#publications">Publications</a></li>
                
                <li class="nav-item"><a href="http://sharmamohit.com/#posts">Posts</a></li>
                
                <li class="nav-item"><a href="http://sharmamohit.com/#projects">Projects</a></li>
                
                <li class="nav-item"><a href="http://sharmamohit.com/#tutorials">Tutorials</a></li>
                
                <li class="nav-item"><a href="http://sharmamohit.com/#teaching">Teaching</a></li>
                
                <li class="nav-item"><a href="http://sharmamohit.com/#contact">Contact</a></li>
                
            </ul>

        </div>
    </div>
</nav>

<div class="container">

    <article class="article article-project" itemscope itemtype="http://schema.org/Article">
        

        <h1 itemprop="name">Python-File-IO</h1>

        

        <div class="article-style" itemprop="articleBody">
            <div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 align='center'>Python File I/O</h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Before we jump in to file I/O functions, lets first look at some basic I/O functions that are available to use in Python. 
In Python, there are three basic I/O connections, Standard Input, Standard Output and Standard Error. As the name suggests, Standard Input is the data that goes to the program through the keyboard. keyboard being the standard input. Standard output is the terminal console, unless redirected..(guess where?!!) and Standard error is the stream where the programs write their error messages which is again to the terminal unless redirected.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Standard-Input:">Standard Input:<a class="anchor-link" href="#Standard-Input:">&#182;</a></h2><p>Python provides two built-in functions to read a line from the keyboard.</p>
<h3 id="raw_input">raw_input<a class="anchor-link" href="#raw_input">&#182;</a></h3><p>The raw_input( ) function reads one line from the standard input and returns it as a string. 
Example:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># Create a file test_input.py and write this:</span>
<span class="nb">str</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Enter your name&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="s1">&#39;Hello&#39;</span><span class="p">,</span><span class="nb">str</span>
<span class="c1"># Now run the file as python test_input.py and input your name.</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Enter your nameMohit
Hello Mohit
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Pretty easy right? When you execute the file, it will prompt you to enter your name and print 'Hello <name>'.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="input">input<a class="anchor-link" href="#input">&#182;</a></h3><p>The input function is equivalent to raw_input, except that it assumes the input is a valid Python expression, evaluates and returns the result.
Take the previous file and replace raw_input by input and execute the code. Now enter this when prompted for input:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="nb">str</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Enter your name&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="s1">&#39;Hello&#39;</span><span class="p">,</span><span class="nb">str</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Enter your name[x for x in range(10)]
Hello [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="File-I/O">File I/O<a class="anchor-link" href="#File-I/O">&#182;</a></h2><p>Until now you have been reading and writing to the standard input. Lets now perform the same function to the files. Now we will see how we can read and write to the files.</p>
<h2 id="Opening-Files:">Opening Files:<a class="anchor-link" href="#Opening-Files:">&#182;</a></h2><p>Files can be opened using python's built-in open() function. This function creates a file object which we will use for performing operations on the file. It will become much clear when we look at a complete example. For now, just remember that we need to create a file object before performing any file I/O and try to remember the syntax.
Syntax:</p>
<p><code>f = open(file_name, access mode, encoding)</code></p>
<p>file_name: The file name that you would like to perform your I/O operations on.
encoding: Encoding tells python what encoding scheme to use to convert the stream of bytes to text. 
access_mode: This is the mode which determines if the file is to opened as read only,read-write, write only etc modes. The ways in which a file can be opened is mentioned below:</p>
<table>
<thead><tr>
<th style="text-align:left">String</th>
<th style="text-align:right">Its Function</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">r</td>
<td style="text-align:right">Opens a file as read only</td>
</tr>
<tr>
<td style="text-align:left">rb</td>
<td style="text-align:right">Opens a file as read only in binary format</td>
</tr>
<tr>
<td style="text-align:left">r+</td>
<td style="text-align:right">Opens a file for reading and writing</td>
</tr>
<tr>
<td style="text-align:left">rb+</td>
<td style="text-align:right">Opens a file for reading and writing in binary format</td>
</tr>
<tr>
<td style="text-align:left">w</td>
<td style="text-align:right">Opens a file for writing only</td>
</tr>
<tr>
<td style="text-align:left">wb</td>
<td style="text-align:right">Opens a file for writing only in binary format</td>
</tr>
<tr>
<td style="text-align:left">w+</td>
<td style="text-align:right">Opens a file for both reading and writing</td>
</tr>
<tr>
<td style="text-align:left">wb+</td>
<td style="text-align:right">Opens a file for writing and reading in binary format</td>
</tr>
<tr>
<td style="text-align:left">a</td>
<td style="text-align:right">Opens a file for appending</td>
</tr>
<tr>
<td style="text-align:left">ab</td>
<td style="text-align:right">Opens a file for appending in binary</td>
</tr>
<tr>
<td style="text-align:left">a+</td>
<td style="text-align:right">Opens a file for appending and reading</td>
</tr>
<tr>
<td style="text-align:left">ab+</td>
<td style="text-align:right">Opens a file for appending and reading in binary format</td>
</tr>
</tbody>
</table>
<h2 id="Reading-and-Writing">Reading and Writing<a class="anchor-link" href="#Reading-and-Writing">&#182;</a></h2><p>Once we have created a file object we can perform many operations on the file object which, like all objects, has methods to take care of nitty gritty details and perform the operations on the file. We will now look at some of the attributes of the file object.</p>
<h3 id="file_object.close()">file_object.close()<a class="anchor-link" href="#file_object.close()">&#182;</a></h3><p>This method will close the file that we have currently open. You should always call this method once you are done performing I/O operations on the file using the file object.</p>
<h3 id="file_object.softspace">file_object.softspace<a class="anchor-link" href="#file_object.softspace">&#182;</a></h3><p>It returns a boolean indicating whether a space character needs to be printed before another value using the print statement. It is kind of a read-write attribute that is used internally by the print statement to keep track of its own state and not by the file object.</p>
<h3 id="file_object.flush()">file_object.flush()<a class="anchor-link" href="#file_object.flush()">&#182;</a></h3><p>This method requests that the file object's buffer to be written out to the operating system, ensuring that the file (as seen by the system) has exactly the contents that the file_object has. (By default python uses operating systems buffer so you don't have to call this, unless you configure it otherwise. It is mainly used for tty devices.)</p>
<h3 id="file_object.isatty()">file_object.isatty()<a class="anchor-link" href="#file_object.isatty()">&#182;</a></h3><p>This method returns true if the file_object is an interactive terminal (tty is a special device that lets people who are deaf, hard of hearing or speech-impaired to communicate)</p>
<h3 id="file_object.mode">file_object.mode<a class="anchor-link" href="#file_object.mode">&#182;</a></h3><p>This is a read-only attribute that is the value of the mode string used in the open call that created the file_object</p>
<h3 id="file_object.name">file_object.name<a class="anchor-link" href="#file_object.name">&#182;</a></h3><p>This is also a read-only attribute that is the value of the filename string used in the open call that created the file_object.</p>
<h3 id="file_object.readline([size])">file_object.readline([size])<a class="anchor-link" href="#file_object.readline([size])">&#182;</a></h3><p>This method reads strings from the file till it reaches new line character ( '\n' ) if the 'size' parameter is empty. If an integer is provided as size parameter, then this method returns string of length size.</p>
<h3 id="file_object.readlines([size])">file_object.readlines([size])<a class="anchor-link" href="#file_object.readlines([size])">&#182;</a></h3><p>This method basically calls the readline() method till it reaches the end of file.</p>
<h3 id="file_object.seek(pos,-how=0)">file_object.seek(pos, how=0)<a class="anchor-link" href="#file_object.seek(pos,-how=0)">&#182;</a></h3><p>Sets the file_object's current position to the signed integer byte offset by pos from the reference point. The how parameter, which is 0 by default, indicates the reference point. how=1 is the reference of current position and how=2 is the reference of the end of the file.</p>
<h3 id="file_object.tell()">file_object.tell()<a class="anchor-link" href="#file_object.tell()">&#182;</a></h3><p>This method tells the current file position when you are reading from or writing to a file.</p>
<h3 id="file_object.truncate([size])">file_object.truncate([size])<a class="anchor-link" href="#file_object.truncate([size])">&#182;</a></h3><p>This method truncates the file to be at most of size size.  If you don't mention the size it takes the size from f.tell() method as the new size.</p>
<h3 id="file_object.write(str)">file_object.write(str)<a class="anchor-link" href="#file_object.write(str)">&#182;</a></h3><p>Writes the bytes of string str to the file.</p>
<h3 id="file_object.writelines(lst)">file_object.writelines(lst)<a class="anchor-link" href="#file_object.writelines(lst)">&#182;</a></h3><p>Writes sequence of strings to file. No new line is added automatically.</p>
<p>Examples:</p>
<p>Let's create a file and perform some interesting I/O operations on it.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># Create a .py file or follow along in Ipython terminal</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>  <span class="c1"># If there is a test.txt file in your current location, this step will overwrite it. So change file_name if you want</span>
    <span class="k">print</span> <span class="s1">&#39;Cursor position in the file before writing: &#39;</span><span class="p">,</span><span class="n">f</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Hello World&#39;</span><span class="p">)</span>
    <span class="k">print</span> <span class="s1">&#39;Cursor position after writing: &#39;</span><span class="p">,</span><span class="n">f</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">IOError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s1">&#39;Error performing I/O operations on the file: &#39;</span><span class="p">,</span><span class="n">e</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">f</span><span class="p">:</span>  <span class="c1"># If file_object exists,</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Cursor position in the file before writing:  0
Cursor position after writing:  11
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Yaay! You created your first file and wrote 'Hello world' to it! Lets edit it now!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r+&#39;</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
    <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">([</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;This is&#39;</span><span class="p">,</span> <span class="s1">&#39;Python&#39;</span><span class="p">])</span>
    <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Go to the starting of file</span>
    <span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>  <span class="c1"># Read all the lines in the file.</span>
    <span class="n">f</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">print</span> <span class="s1">&#39;After truncate: &#39;</span><span class="p">,</span><span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">IOError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s1">&#39;Error performing I/O on file &#39;</span><span class="p">,</span><span class="n">e</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Hello World
[&apos;Hello World\n&apos;, &apos;This isPython&apos;]
After truncate:  [&apos;Hello World\n&apos;, &apos;This isP&apos;]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Great! So now we opened the file, read its contents, added multiple strings, truncated and closed it! This covers pretty much everything that you will need when you are working with almost any kind of file that has some text.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
<h2 id="Exercise:">Exercise:<a class="anchor-link" href="#Exercise:">&#182;</a></h2><p>Create a binary file and write 'Hello World' in it. Now create an ascii file and add the same text to it. Read both the files. Is there any difference between the two?</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="CSV-(Comma-Separated-Values)">CSV (Comma Separated Values)<a class="anchor-link" href="#CSV-(Comma-Separated-Values)">&#182;</a></h2><p>In the above examples, we saw how to perform read-write operations on a file. This is generally used for files that have multiple lines of strings. However if you have data like this:</p>
<table>
<thead><tr>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Data1</td>
<td style="text-align:left">Data2</td>
<td style="text-align:left">Data3</td>
</tr>
<tr>
<td style="text-align:left">Example1</td>
<td style="text-align:left">Example2</td>
<td style="text-align:left">Example3</td>
</tr>
</tbody>
</table>
<p>It is stored in a file with this format:</p>
<p>Data1, Data2, Data3</p>
<p>Example1, Example2, Example3</p>
<p>As can be seen in the above example, each row is a new line, and each column is separated with a comma. Many online services such as an online bank allow its users to export tabular data from the website into a CSV file. These files can then be opened and viewed offline using a Spreadsheet program such as Microsoft Excel.</p>
<h3 id="So-why-do-we-need-such-CSV-files?">So why do we need such CSV files?<a class="anchor-link" href="#So-why-do-we-need-such-CSV-files?">&#182;</a></h3><p>There are two primary reasons for the existence of this format:</p>
<ul>
<li>CSV are plain-text files which makes them easy to store and read from</li>
<li>CSV files are stored as sequence of human readable characters, thus making it easy for humans to interpret the data without requiring any format conversion.</li>
</ul>
<p>CSV is a delimited text file that uses a comma to separate values (many implementations of CSV import/export tools allow other separators to be used). Simple CSV implementations may prohibit field values that contain a comma or other special characters such as newlines. More sophisticated CSV implementations permit them, often by requiring " (double quote) characters around values that contain reserved characters (such as commas, double quotes, or less commonly, newlines). Embedded double quote characters may then be represented by a pair of consecutive double quotes, or by prefixing an escape character such as a backslash (for example in Sybase Central). The name "CSV" indicates the use of the comma to separate data fields. Nevertheless, the term "CSV" is widely used to refer a large family of formats, which differ in many ways. Some implementations allow or require single or double quotation marks around some or all fields; and some reserve the very first record as a header containing a list of field names. An official standard for the CSV file format does not exist.</p>
<p>Download a Sample* CSV file from <a href="https://newclasses.nyu.edu/access/content/group/9ce294e5-cc8b-44f8-963b-8160554a987f/Python%20Lab/Week3/Python%20File%20I_O/sample.csv" title="Sample CSV"><code>HERE</code></a> and save it in your current folder location.</p>
<blockquote><p>Disclaimer: The data generated is completely random using a third party website <a href="https://www.fakenamegenerator.com" title="FakeName Generator"><code>https://www.fakenamegenerator.com</code></a></p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Reading-CSV-files">Reading CSV files<a class="anchor-link" href="#Reading-CSV-files">&#182;</a></h3><p>reader() can be used to create an object that is used to read the data from a csv file. The reader can be used as an iterator to process the rows of the file in order. Lets take a look at an example:
Example</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># You can create a new file or follow along in Ipython terminal</span>
<span class="n">row</span> <span class="o">=</span> <span class="p">[]</span>
<span class="kn">import</span> <span class="nn">csv</span>  <span class="c1"># Importing csv module</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;sample.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
        <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">IOError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s1">&#39;Error: &#39;</span><span class="p">,</span><span class="n">e</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        
<span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[6]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>[[&apos;\xef\xbb\xbfGivenName&apos;, &apos;Gender&apos;, &apos;Title&apos;, &apos;Occupation&apos;, &apos;City&apos;],
 [&apos;Nicholas&apos;, &apos;male&apos;, &apos;Mr.&apos;, &apos;Speech writer&apos;, &apos;Plantation&apos;],
 [&apos;Jeanette&apos;, &apos;female&apos;, &apos;Mrs.&apos;, &apos;Surfacing equipment operator&apos;, &apos;Chicago&apos;],
 [&apos;David&apos;, &apos;male&apos;, &apos;Mr.&apos;, &apos;Engineering geologist&apos;, &apos;Worthington&apos;],
 [&apos;Susan&apos;,
  &apos;female&apos;,
  &apos;Ms.&apos;,
  &apos;Cutting, punching, and press machine tender&apos;,
  &apos;Fulton&apos;],
 [&apos;Dennis&apos;, &apos;male&apos;, &apos;Mr.&apos;, &apos;Construction millwright&apos;, &apos;Fargo&apos;],
 [&apos;Susan&apos;, &apos;female&apos;, &apos;Mrs.&apos;, &apos;Private investigator&apos;, &apos;Blackwood&apos;],
 [&apos;John&apos;, &apos;male&apos;, &apos;Mr.&apos;, &apos;Chemical engineering technician&apos;, &apos;Marietta&apos;],
 [&apos;Damon&apos;, &apos;male&apos;, &apos;Mr.&apos;, &apos;Loan closer&apos;, &apos;Mansfield&apos;],
 [&apos;George&apos;, &apos;male&apos;, &apos;Mr.&apos;, &apos;Public defender&apos;, &apos;Minneapolis&apos;]]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>reader() is a method available in csv package so the first line is importing the csv package. The reader() method takes sequence or an iterable file object, and returns an iterator. As the csv file is being read, each row of the input data is converted to a list of strings. The parser handles the line breaks embedded within the strings which is why using row is not always the output that you might get when taking a line input from file.</p>
<h3 id="Writing-CSV-files">Writing CSV files<a class="anchor-link" href="#Writing-CSV-files">&#182;</a></h3><p>Writing csv files is just as easy as reading them. To write to a csv file, we can use writer() method to create an object for writing and then iterate over the rows using csv's writerow() method to write it.
Example:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">))</span>
<span class="k">except</span> <span class="ne">IOError</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s1">&#39;Error: &#39;</span><span class="p">,</span><span class="n">e</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now try opening the file just like we did before.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Using-Field-Names">Using Field Names<a class="anchor-link" href="#Using-Field-Names">&#182;</a></h3><p>In addition to working with sequences or data, the csv module includes classes for working with rows as dictionaries so that the fields can be named. The DictReader and DictWriter classes translate rows to dictionaries instead of lists. Keys for the dictionary can be passed in, or inferred from the first row in the input.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;sample.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
        <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">IOError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s1">&#39;Error: &#39;</span><span class="p">,</span><span class="n">e</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[8]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>[[&apos;\xef\xbb\xbfGivenName&apos;, &apos;Gender&apos;, &apos;Title&apos;, &apos;Occupation&apos;, &apos;City&apos;],
 [&apos;Nicholas&apos;, &apos;male&apos;, &apos;Mr.&apos;, &apos;Speech writer&apos;, &apos;Plantation&apos;],
 [&apos;Jeanette&apos;, &apos;female&apos;, &apos;Mrs.&apos;, &apos;Surfacing equipment operator&apos;, &apos;Chicago&apos;],
 [&apos;David&apos;, &apos;male&apos;, &apos;Mr.&apos;, &apos;Engineering geologist&apos;, &apos;Worthington&apos;],
 [&apos;Susan&apos;,
  &apos;female&apos;,
  &apos;Ms.&apos;,
  &apos;Cutting, punching, and press machine tender&apos;,
  &apos;Fulton&apos;],
 [&apos;Dennis&apos;, &apos;male&apos;, &apos;Mr.&apos;, &apos;Construction millwright&apos;, &apos;Fargo&apos;],
 [&apos;Susan&apos;, &apos;female&apos;, &apos;Mrs.&apos;, &apos;Private investigator&apos;, &apos;Blackwood&apos;],
 [&apos;John&apos;, &apos;male&apos;, &apos;Mr.&apos;, &apos;Chemical engineering technician&apos;, &apos;Marietta&apos;],
 [&apos;Damon&apos;, &apos;male&apos;, &apos;Mr.&apos;, &apos;Loan closer&apos;, &apos;Mansfield&apos;],
 [&apos;George&apos;, &apos;male&apos;, &apos;Mr.&apos;, &apos;Public defender&apos;, &apos;Minneapolis&apos;]]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Run this and see the difference in the output.</p>
<p>Similar to DictReader, we also have DictWriter which needs to be given a list of field names so it know how to order the columns in the output file. 
Example:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">fieldnm</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Title1&#39;</span><span class="p">,</span> <span class="s1">&#39;Title2&#39;</span><span class="p">,</span> <span class="s1">&#39;Title3&#39;</span><span class="p">)</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">fieldnm</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">fieldnm</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">({</span><span class="s1">&#39;Title1&#39;</span><span class="p">:</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Title2&#39;</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Title3&#39;</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">})</span>
<span class="k">except</span> <span class="ne">IOError</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s1">&#39;Error: &#39;</span><span class="p">,</span><span class="n">e</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This technique is good when the filesize (or the number of columns) is not very big. When the row numbers starts scaling up, the list that is created by the reader() method starts growing in memory and makes the process very very slow. 
We will generally be dealing with the files that have over a million row entries and this method is not the most efficient way of dealing with such files. To handle such 'Big Data', we will study a python package called Numpy in the next week.</p>

</div>
</div>
</div>

        </div>
    </article>

    <nav>
  <ul class="pager">
    
    
    <li class="previous"><a href="http://sharmamohit.com/tutorials/ucsl/Python-Importing-Modules/"><span aria-hidden="true">&larr;</span> Python-Importing-Modules</a></li>
    
    
    
    <li class="next"><a href="http://sharmamohit.com/tutorials/ucsl/Python-Pickle/">Python-Pickle <span aria-hidden="true">&rarr;</span></a></li>
    

     <li class="current"><a href="http://sharmamohit.com/"><span aria-hidden="true"></span> <i class="fa fa-home" aria-hidden="true"></i> Home </a></li>
    
    </ul>
</nav>


</div>
<footer class="site-footer">
    <div class="container">
        <p class="powered-by">

          &copy; 2016 Mohit Sharma 

            <span class="pull-right"><a href="#" id="back_to_top"><span class="button_icon"><i class="fa fa-chevron-up fa-2x" aria-hidden="true"></i></span></a></span>

        </p>
    </div>
</footer>

        <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.4/TweenMax.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ScrollToPlugin.min.js"></script>
        <script src="http://sharmamohit.com/js/jquery-1.12.3.min.js"></script>
        <script src="http://sharmamohit.com/js/bootstrap.min.js"></script>
        <script src="http://sharmamohit.com/js/hugo-academic.js"></script>
        

        

        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

        
        

    </body>
</html>

